<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coolie Links SA – Smart Education & Career Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {--primary:#f97316;--accent:#facc15;}
        body {background:linear-gradient(135deg,#1e3c72,#2a5298);color:white;font-family:'Segoe UI',sans-serif;padding-top:90px;}
        .navbar {position:fixed;top:0;width:100%;z-index:1000;background:rgba(0,0,0,0.95)!important;backdrop-filter:blur(12px);}
        .navbar-brand {font-weight:800;font-size:2rem;background:linear-gradient(45deg,#ff6b6b,#feca57);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .hero {text-align:center;padding:100px 20px;background:linear-gradient(rgba(0,0,0,0.7),rgba(0,0,0,0.7)),url('https://images.unsplash.com/photo-1581092580490-5d421a3d73e9?auto=format&fit=crop&q=80') center/cover;border-radius:20px;margin:20px;}
        .tab-btn {background:#1e293b;color:#e2e8f0;border:none;padding:12px 24px;border-radius:50px;margin:5px;transition:0.3s;}
        .tab-btn.active,.tab-btn:hover {background:var(--accent);color:black;font-weight:600;}
        .card-item {background:rgba(255,255,255,0.1);backdrop-filter:blur(12px);border-radius:16px;transition:0.3s;height:100%;border:1px solid transparent;}
        .card-item:hover {transform:translateY(-12px);border-color:var(--accent);box-shadow:0 20px 40px rgba(249,115,22,0.3);}
        .fav-btn {cursor:pointer;transition:0.3s;}
        .fav-btn.active {color:#f97316 !important;}
        #resultsInfo {font-size:1.1rem;margin:20px 0;}
        footer {background:rgba(0,0,0,0.8);padding:50px 0;margin-top:100px;}
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Coolie Links SA</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="nav">
            <ul class="navbar-nav ms-auto gap-2">
                <button class="tab-btn active" data-tab="all">All</button>
                <button class="tab-btn" data-tab="universities">Universities</button>
                <button class="tab-btn" data-tab="tvet">TVET</button>
                <button class="tab-btn" data-tab="bursaries">Bursaries</button>
                <button class="tab-btn" data-tab="jobs">Jobs</button>
                <button class="btn btn-outline-warning btn-sm" id="showFavorites">Favorites (<span id="favCount">0</span>)</button>
            </ul>
        </div>
    </div>
</nav>

<div class="hero">
    <h1 class="display-4 fw-bold mb-4">Your Future in Mzansi Starts Here</h1>
    <p class="lead">Choose your path — we make it simple</p>
    <div class="row justify-content-center g-3 mt-3">
        <div class="col-md-5">
            <input type="text" id="searchInput" class="form-control form-control-lg" placeholder="Search anything...">
        </div>
        <div class="col-md-3">
            <select id="provinceFilter" class="form-select form-select-lg">
                <option value="">All Provinces</option>
                <option>Eastern Cape</option><option>Free State</option><option>Gauteng</option>
                <option>KwaZulu-Natal</option><option>Limpopo</option><option>Mpumalanga</option>
                <option>Northern Cape</option><option>North West</option><option>Western Cape</option>
            </select>
        </div>
    </div>
</div>

<div class="container">
    <div id="resultsInfo" class="text-center"></div>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4" id="resultsGrid"></div>
</div>

<footer class="text-center">
    <p>Coolie Links SA • 2025 • Empowering South African Youth</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Full dataset with type & province
const allData = [
    ...universities.map(u => ({...u, type:"university", province: getProvinceFromCity(u.city)})),
    ...tvetColleges.map(t => ({...t, type:"tvet"})),
    ...bursaries.map(b => ({...b, type:"bursary", province:"National"})),
    ...jobPortals.map(j => ({...j, type:"job", province:"National", website: j.url}))
];

let favorites = JSON.parse(localStorage.getItem("coolieFavs") || "[]");
let currentTab = "all";
let showFavsOnly = false;

function getProvinceFromCity(city) {
    const map = {
        "Cape Town":"Western Cape","Stellenbosch":"Western Cape","Bellville":"Western Cape",
        "Johannesburg":"Gauteng","Pretoria":"Gauteng","Vanderbijlpark":"Gauteng",
        "Durban":"KwaZulu-Natal","Pietermaritzburg":"KwaZulu-Natal",
        "Bloemfontein":"Free State","Kimberley":"Northern Cape",
        "Gqeberha":"Eastern Cape","Makhanda":"Eastern Cape","Alice":"Eastern Cape",
        "Polokwane":"Limpopo","Thohoyandou":"Limpopo",
        "Mbombela":"Mpumalanga","Potchefstroom":"North West","Mahikeng":"North West"
    };
    return Object.keys(map).find(key => city.includes(key)) ? map[Object.keys(map).find(key => city.includes(key))] : "Multiple";
}

function render() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const province = document.getElementById("provinceFilter").value;
    let filtered = allData;

    if (currentTab !== "all") filtered = filtered.filter(i => i.type === currentTab);
    if (showFavsOnly) filtered = filtered.filter(i => favorites.includes(i.name));
    if (search) filtered = filtered.filter(i => i.name.toLowerCase().includes(search) || (i.desc && i.desc.toLowerCase().includes(search)));
    if (province && (currentTab === "all" || currentTab === "university" || currentTab === "tvet")) {
        filtered = filtered.filter(i => i.province === province);
    }

    const grid = document.getElementById("resultsGrid");
    grid.innerHTML = "";
    document.getElementById("resultsInfo").textContent = `Showing \( {filtered.length} result \){filtered.length !== 1 ? 's' : ''}`;

    filtered.forEach(item => {
        const isFav = favorites.includes(item.name);
        const col = document.createElement("div");
        col.className = "col";
        const icon = item.type === "university" ? "building-fill" : 
                     item.type === "tvet" ? "tools" : 
                     item.type === "bursary" ? "award-fill" : "briefcase-fill";
        col.innerHTML = `
            <div class="card-item p-4 text-center position-relative">
                <button class="position-absolute top-0 end-0 m-3 fav-btn fs-4 \( {isFav?'active':''}" data-name=" \){item.name}">
                    ${isFav?'Filled Heart':'Heart'}
                </button>
                <i class="bi bi-${icon} display-4 mb-3 text-warning opacity-75"></i>
                ${item.province && (item.type === "university" || item.type === "tvet") ? 
                    `<span class="badge bg-success mb-2">${item.province}</span><br>` : ''}
                <h5 class="mt-2">${item.name}</h5>
                \( {item.desc ? `<p class="small text-muted"> \){item.desc}</p>` : ''}
                <a href="${item.website}" target="_blank" class="btn btn-outline-light w-100 mt-3">Visit Website</a>
            </div>`;
        grid.appendChild(col);
    });

    // Favorites
    document.querySelectorAll(".fav-btn").forEach(btn => {
        btn.onclick = () => {
            const name = btn.dataset.name;
            if (favorites.includes(name)) {
                favorites = favorites.filter(f => f !== name);
                btn.innerHTML = 'Heart';
                btn.classList.remove("active");
            } else {
                favorites.push(name);
                btn.innerHTML = 'Filled Heart';
                btn.classList.add("active");
            }
            localStorage.setItem("coolieFavs", JSON.stringify(favorites));
            document.getElementById("favCount").textContent = favorites.length;
        };
    });
}

// Tabs & Filters
document.querySelectorAll(".tab-btn").forEach(b => b.addEventListener("click", () => {
    document.querySelectorAll(".tab-btn").forEach(x => x.classList.remove("active"));
    b.classList.add("active");
    currentTab = b.dataset.tab;
    render();
}));
document.getElementById("showFavorites").onclick = () => {
    showFavsOnly = !showFavsOnly;
    document.getElementById("showFavorites").classList.toggle("btn-warning", showFavsOnly);
    render();
};
document.getElementById("searchInput").addEventListener("input", render);
document.getElementById("provinceFilter").addEventListener("change", render);

// Init
render();
</script>
</body>
</html>
